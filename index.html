<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2D Floor Plan to 3D Model</title>
    <link rel="stylesheet" href="styles.css">
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.module.js",
                "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.158.0/examples/jsm/"
            }
        }
    </script>
</head>
<body>
  <!-- LEFT SIDEBAR - 2D Floor Plan Tools -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <h2>2D Floor Plan</h2>
      <button id="sidebar-toggle" class="icon-btn" title="Toggle Sidebar">
        ‚ò∞
      </button>
    </div>

    <!-- Drawing Tools Section -->
    <div class="sidebar-section">
      <h3 class="section-title">Drawing Tools</h3>
      <div class="tool-grid">
        <button id="mode-draw" class="tool-btn active" title="Draw Walls">
          <span class="tool-icon">‚úèÔ∏è</span>
          <span class="tool-label">Draw Walls</span>
        </button>
        <button id="mode-edit" class="tool-btn" title="Edit">
          <span class="tool-icon">‚úÇÔ∏è</span>
          <span class="tool-label">Edit</span>
        </button>
        <button id="mode-door" class="tool-btn" title="Add Doors">
          <span class="tool-icon">üö™</span>
          <span class="tool-label">Doors</span>
        </button>
        <button id="mode-window" class="tool-btn" title="Add Windows">
          <span class="tool-icon">ü™ü</span>
          <span class="tool-label">Windows</span>
        </button>
        <button id="mode-patio" class="tool-btn" title="Add Patio">
          <span class="tool-icon">üè°</span>
          <span class="tool-label">Patio</span>
        </button>
      </div>
    </div>

    <!-- Floor Management Section -->
    <div class="sidebar-section">
      <h3 class="section-title">Floor Management</h3>
      <div class="input-group">
        <label>Current Floor:</label>
        <select id="floor-selector">
          <option value="0" selected>Floor 1</option>
        </select>
      </div>
      <button id="add-floor" class="btn-secondary full-width">+ Add Floor</button>
      <label class="checkbox-label">
        <input type="checkbox" id="show-floor-overlay" checked>
        <span>Show Floor Below</span>
      </label>
    </div>

    <!-- Door Style Section -->
    <div class="sidebar-section">
      <h3 class="section-title">Door Style</h3>
      <div class="input-group">
        <select id="door-style">
          <option value="swing" selected>Swing Door (3')</option>
          <option value="pocket">Pocket Door (3')</option>
          <option value="bifold">Bifold Door (4')</option>
          <option value="double">Double Door (6')</option>
        </select>
      </div>
    </div>

    <!-- Patio Options Section -->
    <div class="sidebar-section">
      <h3 class="section-title">Patio Options</h3>
      
      <label class="checkbox-label">
        <input type="checkbox" id="patio-has-roof">
        <span>Add Roof to Patio</span>
      </label>
      
      <div class="input-group">
        <label>Patio Roof Style:</label>
        <select id="patio-roof-style">
          <option value="flat" selected>Flat Roof</option>
          <option value="gable">Gable Roof</option>
          <option value="hip">Hip Roof</option>
        </select>
      </div>
    </div>

    <!-- Actions Section -->
    <div class="sidebar-section">
      <h3 class="section-title">Actions</h3>
      <button id="clear-plan" class="btn-danger full-width">Clear Plan</button>
      <button id="undo" class="btn-secondary full-width">Undo</button>
      <button id="export-design" class="btn-secondary full-width">Export Design</button>
    </div>
  </div>

  <!-- TOP TOOLBAR - 3D Controls (OUTSIDE main-content) -->
  <div class="top-toolbar">
    <div class="toolbar-left">
      <h1 class="app-title">Floor Plan to 3D</h1>
    </div>

    <div class="toolbar-center">
      <!-- 3D View Controls Group -->
      <div class="control-group">
        <span class="group-label">3D VIEW</span>
        <label class="checkbox-inline">
          <input type="checkbox" id="show-roof" checked>
          <span>Show Roof</span>
        </label>
      </div>

      <!-- Wall Height Control -->
      <div class="control-group">
        <label class="slider-label">
          <span>Wall Height:</span>
          <span id="wall-height-value" class="value-display">8ft</span>
        </label>
        <input type="range" id="wall-height" min="8" max="12" step="0.5" value="8" class="slider">
      </div>

      <!-- Has Roof Checkbox -->
      <div class="control-group">
        <label class="checkbox-inline">
          <input type="checkbox" id="floor-has-roof">
          <span>Add Roof to This Floor</span>
        </label>
      </div>

      <!-- Roof Style Dropdown -->
      <div class="control-group">
        <label>Roof Style (Current Floor):</label>
        <select id="roof-style" class="compact-select">
          <option value="hip" selected>Hip Roof</option>
          <option value="gable">Gable Roof</option>
          <option value="flat">Flat Roof</option>
        </select>
      </div>

      <!-- Roof Pitch Slider -->
      <div class="control-group">
        <label class="slider-label">
          <span>Pitch (Current Floor):</span>
          <span id="roof-pitch-value" class="value-display">6:12</span>
        </label>
        <input type="range" id="roof-pitch" min="4" max="12" step="1" value="6" class="slider">
      </div>

      <!-- Overhang Slider -->
      <div class="control-group">
        <label class="slider-label">
          <span>Overhang (Current Floor):</span>
          <span id="roof-overhang-value" class="value-display">1.0 ft</span>
        </label>
        <input type="range" id="roof-overhang" min="0" max="3" step="0.5" value="1" class="slider">
      </div>
    </div>

    <div class="toolbar-right">
      <button id="regenerate-3d" class="btn-primary">
        <span>üîÑ</span>
        <span>Update 3D</span>
      </button>
    </div>
  </div>

  <!-- MAIN CONTENT AREA -->
  <div class="main-content">
    <!-- SPLIT VIEW CONTAINER -->
    <div class="split-container">
      <!-- LEFT: 2D Canvas -->
      <div class="canvas-container-2d">
        <canvas id="floor-plan-canvas"></canvas>
        <div class="canvas-info">
          <p>üìè Walls: <span id="wall-count">0</span> | Length: <span id="total-length">0</span> ft</p>
        </div>
      </div>

      <!-- RIGHT: 3D Viewer -->
      <div class="canvas-container-3d">
        <canvas id="three-canvas"></canvas>
        <div class="canvas-info-3d">
          <div class="info-title">üéÆ 3D Controls</div>
          <ul class="control-list">
            <li>Left Click + Drag: Rotate</li>
            <li>Right Click + Drag: Pan</li>
            <li>Scroll: Zoom</li>
          </ul>
        </div>
        <div class="stats-panel">
          <div class="stats-title">üìä Model Stats</div>
          <div class="stat-row">
            <span class="stat-label">Floors:</span>
            <span class="stat-value" id="stat-floors">1</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">Walls:</span>
            <span class="stat-value" id="stat-walls">0</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">Doors:</span>
            <span class="stat-value" id="stat-doors">0</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">Windows:</span>
            <span class="stat-value" id="stat-windows">0</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Application Script -->
  <script type="module" src="app.js"></script>
</body>
</html>
